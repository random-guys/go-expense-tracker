<template>
  <div class="main">
    <div class="result resultPage">
      <img
        src="../assets/images/vector-shapes-1.svg"
        alt="Morph Icon Left"
        class="morph-icon-left morphIconLeft"
      />
      <img
        src="../assets/images/vector-shapes-2.svg"
        alt="Morph Icon Right"
        class="morph-icon-right morphIconRight"
      />
      <img
        src="../assets/images/result-page-leaf.svg"
        alt="Morph Icon Right"
        class="leaf-bottom-right leafBottomRight"
      />
      <svg
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        width="182"
        height="135"
        viewBox="0 0 182 135"
        class="baller-emoji"
        id="ballerEmoji"
      >
        <defs>
          <path
            id="a"
            d="M28.8 28.8c15.906 0 28.8-12.894 28.8-28.8H0c0 15.906 12.894 28.8 28.8 28.8z"
          />
        </defs>
        <g fill="none" fill-rule="evenodd">
          <g transform="rotate(-15 91 14.83)">
            <circle cx="150.4" cy="65.6" r="16" fill="#FFC94F" fill-rule="nonzero" />
            <path
              fill="#000"
              fill-rule="nonzero"
              d="M157.269 59.669l-16 16a1.6 1.6 0 1 0 2.262 2.262l16-16a1.6 1.6 0 1 0-2.262-2.262z"
            />
            <circle cx="16" cy="65.6" r="16" fill="#FFC94F" fill-rule="nonzero" />
            <path
              fill="#000"
              fill-rule="nonzero"
              d="M10.731 59.669l16 16a1.6 1.6 0 1 1-2.262 2.262l-16-16a1.6 1.6 0 1 1 2.262-2.262z"
            />
            <circle cx="83.2" cy="67.2" r="67.2" fill="#FFC94F" fill-rule="nonzero" />
            <path
              fill="#000"
              fill-rule="nonzero"
              d="M140.962 32.838C129.238 13.173 107.757 0 83.2 0 58.03 0 36.092 13.838 24.58 34.32c10.756-.33 32.096-.51 53.905-.68 1.408-.01 3.306-8.029 4.715-8.04 1.97-.015 3.452 7.976 5.411 7.96 22.203-.174 43.258-.364 52.351-.722z"
            />
            <circle cx="54.4" cy="62.4" r="6.4" fill="#000" fill-rule="nonzero" />
            <circle id="rightEye" cx="112" cy="62.4" r="6.4" fill="#000" fill-rule="nonzero" />
            <g transform="translate(54.4 86.4)">
              <mask id="b" fill="#fff">
                <use xlink:href="#a" />
              </mask>
              <use fill="#674B0A" fill-rule="nonzero" xlink:href="#a" />
              <path
                fill="#F47079"
                fill-rule="nonzero"
                d="M44.8 38.4c15.906 0 28.8-12.894 28.8-28.8H16c0 15.906 12.894 28.8 28.8 28.8z"
                mask="url(#b)"
                transform="matrix(1 0 0 -1 0 48)"
              />
            </g>
          </g>
          <path
            id="sunShade"
            fill="#000"
            d="M156 36l-34.935 59.87-38.357-21.912L60.51 112 0 77.434l60.646-16.078-.091-.052L156 36z"
          />
          <path
            id="sunShadeHand"
            fill="#000"
            fill-rule="nonzero"
            d="M114.58 51.914l66-20a2 2 0 0 0-1.16-3.828l-66 20a2 2 0 0 0 1.16 3.828z"
          />
        </g>
      </svg>

      <div class="baller">
        <p class="display-none the-money-monk">The Money Monk</p>
        <p class="display-none the-essentialist">The Essentialist</p>
        <p class="display-none the-sensible-sage">The Sensible Sage</p>
        <p class="display-none the-baby-baller">The Baby Baller</p>
        <p class="display-none the-spontanious-spender">The Spontaneous Spender</p>
        <p class="display-none the-big-spender">The Big Spender</p>
        <p class="display-none the-generous-sage">The Generous Sage</p>
        <p class="display-none the-money-maestro">The Money Maestro</p>
      </div>
      <div class="comment">
        <p class="display-none the-money-monk-comment">You'd watch your money like a hawk if you could! It's no surprise to you that most of your money goes towards `highest expense` *.* In your bank, every kobo has it's place and every Naira has it's time. Do it easier with GoMoney. GoMoney is designed to help you keep track of your money. You get push notifications every time you spend; clear and concise spending overviews with categorised spending reports, a bill splitting tool and many channels through which you can receive (and send) money.</p>
        <p class="display-none the-essentialist-comment">You probably spend a lot of time working out budgets and monitoring your spending habits; adjusting your needs to fit into your money goals. Most of your expenses go towards `highest expense` ; you're careful, not boring. GoMoney is designed to help you organise your money and declutter your finances, freeing you up to do more of the things you enjoy. So sit back, take a sip out of your (reasonably priced) drink and let GoMoney handle the hassle.</p>
        <p class="display-none the-sensible-sage-comment">You have a budget, but you probably often go beyond it for `highest expense` and other expenses because you cannot come and die. It's not that you're bad at planning, you just haven't taken your needs and personality into account when creating your budget. GoMoney can help. You can monitor your expenses without spending too much time mapping out a budget. Your app will categorise your spending, so you see exactly how you are spending your money and can adjust to satisfy your desired goals.</p>
        <p class="display-none the-baby-baller-comment">You like to plot your enjoyment; you know most of your money is going towards `highest expense` and you don't let mislay expenses steal your fun. Don't get caught up on calculating spending (when you should be chilling with the money), Let GoMoney handle the boring bits. Split bills, schedule payments, request and send money, and track expenses; with GoMoney, you can plan before, during and after you spend without breaking a sweat!</p>
        <p class="display-none the-spontanious-spender-comment">Money goes through your account like water goes through a sponge— quickly, but languid enough that there's still some left for later. `highest expense` might claim most of your money now, but with you, that won't always be the case. Baller, meet GoMoney, flexibility is our MO. Think of GoMoney as your financial assistant, designed to tailor itself to your specific needs. Whether you're a keen saver, a big spender or somewhere in-between, we've got the tools to meet your needs.</p>
        <p class="display-none the-big-spender-comment">You most likely have savings, but you're also not afraid to spend your money on the things you enjoy— like `highest expense`. You're what the kids call 'goals'. Let's make that easier. With GoMoney's payments features (plural), you can send and receive money from anyone, anytime, with as little as a unique payment link and their phone number. And with our ring-fenced security, you have total peace of mind knowing that someone is looking out for you while you're out enjoying your money.</p>
        <p class="display-none the-generous-sage-comment">You're into using your money on the to buy yourself things you enjoy. For you, the thrill is sometimes in the spending, or the investing; GoMoney can fire up that fun. GoMoney has democratised payments, and in this regime, you choose what payment method works for you. Add bill splitting, scheduling payments, push notifications and a detailed expense tracker to the mix, you have all the tools you need to splurge till you drop.</p>
        <p class="display-none the-money-maestro-comment">You are "baller" personified. Your mother birthed you to enjoy, and enjoy you shall. But how do you enjoy your money with all the limitations, security concerns and many account numbers flying around? Try GoMoney. With a variety of payment plans to choose from, you decide how and when you want to send money, depending on what you're feeling. And if your money goals change, no problem. GoMoney is designed to grow with you and help you achieve your goals!</p>
      </div>
      <div class="amount" v-for="(detail, index) in amountSum" :key="index">
        <div class="figure">
          <p>₦{{ detail.value.toLocaleString() }}</p>
        </div>
      </div>
      <select v-model="selected" class="monthly" @change="calcAmount($event)">
        <option>Weekly</option>
        <option>Monthly</option>
        <option>Yearly</option>
      </select>

      <div class="btn">
        <p>JOIN THE WAITLIST</p>
      </div>
      <div class="share-icon">
        <div class="icon1">
          <a href="https://www.instagram.com" class="link" target="_blank">
            <img src="../assets/images/instagram.svg" alt="Instagram Icon" class="icon">
          </a>
        </div>
        <div class="icon2">
          <a href="https://www.facebook.com" class="link" target="_blank">
            <img src="../assets/images/facebook.svg" alt="Facebook Icon" class="icon">
          </a>
        </div>
        <div class="icon3">
          <a href="https://twitter.com" class="link" target="_blank">
            <img src="../assets/images/twitter.svg" alt="Twitter Icon" class="icon">
          </a>
        </div>
        <!-- <div class="icon4"></div> -->
      </div>
      <div class="share">SHARE</div>
    </div>
    <canvas id="confetti" class="canvas"></canvas>
  </div>
</template>

<script>
import ConfettiGenerator from "confetti-js";

export default {
  name: 'app',
  data() {
    return {
      userDetails: [],
      amountSum: [],
      selected: "Monthly",
      weekly: "",
      monthly: "",
      yearly: ""
    };
  },
  mounted() {
    this.userDetails = JSON.parse(localStorage.getItem("user_details"));
    this.amountSum = [{
      value: 0
    }]
    this.userDetails.map(details => {
      this.monthly = details.amount
    })
    this.amountSum.map(amount => {
      amount.value = this.monthly
    })
    const headerCanvasSettings = {
      target: 'confetti',
      max: '100',
      size: '3',
      animate: true,
      props: ['circle', 'square', 'triangle', 'rectangle'],
      colors: [[165, 104, 246], [230, 61, 135], [0, 199, 228], [253, 214, 126], [57, 181, 74], [237, 28, 36], [252, 238, 33], [251, 176, 59], [0, 255, 255], [237, 30, 121]],
      clock: '50',
      rotate: true
    }
    const canvas = new ConfettiGenerator(headerCanvasSettings)
    canvas.render()

    const tl = new TimelineMax();

    tl.fromTo(
      ".resultPage",
      1.5,
      { opacity: 0, ease: Power2.easeInOut },
      { opacity: 1, ease: Power2.easeInOut }
    );

    TweenMax.fromTo(
      ".morphIconRight",
      60,
      { scale: "0.8" },
      {
        repeat: -1,
        yoyo: true,
        repeatDelay: 0.4,
        ease: Linear.easeNone,
        scale: "1",
        rotation: "-180"
      },
      -3
    );
    TweenMax.fromTo(
      ".morphIconLeft",
      120,
      { scale: "1" },
      {
        repeat: -1,
        yoyo: true,
        repeatDelay: 0.4,
        ease: Linear.easeNone,
        scale: "1.5",
        rotation: "360"
      },
      -3
    );
    TweenMax.fromTo(
      ".leafBottomRight",
      5,
      { x: 0, y: 0, scale: "1" },
      {
        repeat: -1,
        yoyo: true,
        repeatDelay: 0.4,
        ease: Linear.easeNone,
        x: 10,
        y: -30,
        scale: "1.1"
      }
    );
    TweenMax.fromTo(
      "#sunShade",
      0.3,
      { y: "0" },
      {
        repeat: -1,
        yoyo: true,
        repeatDelay: 0.5,
        ease: Linear.easeNone,
        y: "-60"
      }
    );
    TweenMax.fromTo(
      "#sunShadeHand",
      0.3,
      { y: "0" },
      {
        repeat: -1,
        yoyo: true,
        repeatDelay: 0.5,
        ease: Linear.easeNone,
        y: "-50",
        rotation: "40"
      }
    );
    if(this.monthly <= 20000 ) {
      TweenMax.fromTo(
        ".the-money-monk",
        0.3,
        { opacity: "0" },
        {
          repeat: -1,
          yoyo: true,
          repeatDelay: 0.5,
          ease: Linear.easeNone,
          display: "block",
          opacity: "1"
        }
      )
      TweenMax.fromTo(
        ".the-money-monk-comment",
        0.3,
        { opacity: "0" },
        {
          display: "block",
          opacity: "1"
        }
      )
    }
    if(this.monthly > 20000 && this.monthly <= 30000) {
      TweenMax.fromTo(
        ".the-essentialist",
        0.3,
        { opacity: "0" },
        {
          repeat: -1,
          yoyo: true,
          repeatDelay: 0.5,
          ease: Linear.easeNone,
          display: "block",
          opacity: "1"
        }
      )
      TweenMax.fromTo(
        ".the-essentialist-comment",
        0.3,
        { opacity: "0" },
        {
          display: "block",
          opacity: "1"
        }
      )
    }
    if(this.monthly > 30000 && this.monthly <= 50000) {
      TweenMax.fromTo(
        ".the-sensible-sage",
        0.3,
        { opacity: "0" },
        {
          repeat: -1,
          yoyo: true,
          repeatDelay: 0.5,
          ease: Linear.easeNone,
          display: "block",
          opacity: "1"
        }
      )
      TweenMax.fromTo(
        ".the-sensible-sage-comment",
        0.3,
        { opacity: "0" },
        {
          display: "block",
          opacity: "1"
        }
      )
    }
    if(this.monthly > 50000 && this.monthly <= 60000) {
      TweenMax.fromTo(
        ".the-baby-baller",
        0.3,
        { opacity: "0" },
        {
          repeat: -1,
          yoyo: true,
          repeatDelay: 0.5,
          ease: Linear.easeNone,
          display: "block",
          opacity: "1"
        }
      )
      TweenMax.fromTo(
        ".the-baby-baller-comment",
        0.3,
        { opacity: "0" },
        {
          display: "block",
          opacity: "1"
        }
      )
    }
    if(this.monthly > 60000 && this.monthly <= 70000) {
      TweenMax.fromTo(
        ".the-spontanious-spender",
        0.3,
        { opacity: "0" },
        {
          repeat: -1,
          yoyo: true,
          repeatDelay: 0.5,
          ease: Linear.easeNone,
          display: "block",
          opacity: "1"
        }
      )
      TweenMax.fromTo(
        ".the-spontanious-spender-comment",
        0.3,
        { opacity: "0" },
        {
          display: "block",
          opacity: "1"
        }
      )
    }
    if(this.monthly > 70000 && this.monthly <= 85000) {
      TweenMax.fromTo(
        ".the-big-spender",
        0.3,
        { opacity: "0" },
        {
          repeat: -1,
          yoyo: true,
          repeatDelay: 0.5,
          ease: Linear.easeNone,
          display: "block",
          opacity: "1"
        }
      )
      TweenMax.fromTo(
        ".the-big-spender-comment",
        0.3,
        { opacity: "0" },
        {
          display: "block",
          opacity: "1"
        }
      )
    }
    if(this.monthly > 85000 && this.monthly <= 100000) {
      TweenMax.fromTo(
        ".the-generous-sage",
        0.3,
        { opacity: "0" },
        {
          repeat: -1,
          yoyo: true,
          repeatDelay: 0.5,
          ease: Linear.easeNone,
          display: "block",
          opacity: "1"
        }
      )
      TweenMax.fromTo(
        ".the-generous-sage-comment",
        0.3,
        { opacity: "0" },
        {
          display: "block",
          opacity: "1"
        }
      )
    }
    if(this.monthly > 100000 ) {
      TweenMax.fromTo(
        ".the-money-maestro",
        0.3,
        { opacity: "0" },
        {
          repeat: -1,
          yoyo: true,
          repeatDelay: 0.5,
          ease: Linear.easeNone,
          display: "block",
          opacity: "1"
        }
      )
      TweenMax.fromTo(
        ".the-money-maestro-comment",
        0.3,
        { opacity: "0" },
        {
          display: "block",
          opacity: "1"
        }
      )
    }

  },
  methods: {
    calcAmount() {
      let amount = ""
      this.userDetails.map(detail => {
        amount = detail.amount
      })
      if(this.selected === "Weekly") {
        this.weekly = amount / 4
        this.amountSum.map(amount => {
          amount.value = this.weekly
        })
      }
      if(this.selected === "Monthly") {
        this.monthly = amount
        this.amountSum.map(amount => {
          amount.value = this.monthly
        })
      }
      if(this.selected === "Yearly") {
        this.yearly = amount * 12
        this.amountSum.map(amount => {
          amount.value = this.yearly
        })
      }
    }
  }
};
</script>

<style lang="scss" scoped>
@import "@/assets/styles/main";
</style>